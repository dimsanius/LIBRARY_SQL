CREATE DATABASE IF NOT EXISTS KNYGYNAS;
USE KNYGYNAS;

DROP TABLE IF EXISTS GRAFIKAS;
DROP TABLE IF EXISTS MOKINIAI;
DROP TABLE IF EXISTS UDK;

CREATE TABLE MOKINIAI
(
ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
VARDAS VARCHAR(20) NOT NULL,
PAVARDE VARCHAR(20) NOT NULL,
KLASE_NR INT,
KLASE_RAIDE VARCHAR(1),
KIEK_YRA_PAIMTU_KNYGU INT DEFAULT 0,
KIEK_ATIDAVE_KNYGU INT DEFAULT 0,
KADA_UZREGISTRUOTAS DATETIME DEFAULT NOW()
);

CREATE TABLE UDK
(
ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
UDK_APRASYMAS VARCHAR(30) NOT NULL
);

CREATE TABLE GRAFIKAS
(
ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
PAIMTOS_KNYGOS_AUTORIUS VARCHAR(50),
PAIMTOS_KNYGOS_PAVADINIMAS VARCHAR(50),
UDK_NUMERIS_ID INT NOT NULL,
KAS_PAEME_ID INT NOT NULL,
KADA_PAEME DATETIME DEFAULT NULL,
KADA_ATIDAVE DATETIME DEFAULT NULL,
FOREIGN KEY(UDK_NUMERIS_ID)
REFERENCES UDK(ID),
FOREIGN KEY(KAS_PAEME_ID)
REFERENCES MOKINIAI(ID)
);